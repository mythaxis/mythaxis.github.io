{{/*
  nebula2026/base.html

  Base HTML structure for nebula2026 layouts.
  Provides consistent head, body wrapper, and script includes.
*/}}
<!DOCTYPE HTML>
<html lang='{{ .Site.Language.Lang | default "en-us" }}'>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} - {{ .Site.Title }}{{ end }}</title>

  {{/* Basic meta tags */}}
  <meta name="description" content="{{ .Site.Params.description }}">
  <meta name="keywords" content="{{ .Site.Params.keywords }}">

  {{/* Load Nebula 2026 CSS */}}
  {{ $css := resources.Get "css/nebula2026/main.css" }}
  <link rel="stylesheet" href="{{ $css.RelPermalink }}">

  {{/* Inject issue-specific colors as CSS custom properties */}}
  {{ $colors := partial "functions/resolveColorScheme.html" . }}
  <style>
    :root {
      --color-primary: {{ $colors.primary }};
      --color-secondary: {{ $colors.secondary }};
    }
  </style>
</head>
<body class="nebula2026">
  {{ partial "nebula2026/menu.html" . }}

  <div class="nebula-wrapper">
    {{ block "nebula-content" . }}{{ end }}
  </div>

  {{/* Nebula 2026 JavaScript */}}
  <script src="{{ "/js/nebula2026/story-cards.js" | relURL }}"></script>

  {{/* Chapter markers script for story pages */}}
  {{ if eq .Type "stock" }}
    <script src="{{ "/js/nebula2026/chapter-markers.js" | relURL }}"></script>
  {{ end }}

  {{/* Analytics */}}
  {{ template "_internal/google_analytics.html" . }}
</body>
</html>
